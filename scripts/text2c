#! /usr/bin/perl -w
my $class = "static";
if($ARGV[0] eq '-extern') {
    $class = "";
    shift;
}
my $name = shift;
push(@out, "/* autogenerated file, do not edit */\n\n");
push(@out, "$class const char $name\[] = \n");
while(<>) {
    next if /arch-tag/;
    s/[\\\"\?]/\\$&/g;
    s/\n/\\n/g;
    push(@out, "  \"$_\"\n");
}
push(@out, ";\n");
((print @out)
 and (close STDOUT))
    or die "$0: stdout: $!\n";
